<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="Article"> 
	<insert id ="insertOne" parameterType="HashMap">
		INSERT INTO TB_ARTICLE
		(TYPE_ITEM,
		TYPE_ARTICLE,
		DATE_LOST,
		DATE_UPLOAD,
		HOLD,
		PLACE,
		TITLE,
		CONTENTS,
		IMAGE,
		MEMBER_SEQ)
		VALUES
		(#{article.TYPE_ITEM},
		"test",
		"test",
		#{article.DATE_UPLOAD},
		"1",
		#{article.PLACE},
		#{article.TITLE},
		#{article.CONTENTS},
		"test",
		(SELECT SEQ FROM TB_MEMBER
		WHERE NICKNAME=#{article.NICKNAME})
		)
	</insert>
	<update id = "updateHits" parameterType="HashMap">
		UPDATE TB_ARTICLE
		SET HITS=HITS+1
		WHERE SEQ = #{seq}
	</update>
	<select id = "selectAll" resultType="com.project.TheLostItemFinder.lostItem.service.ArticleDTO">
		SELECT
		A.SEQ, 
		A.TYPE_ITEM,
		A.TYPE_ARTICLE,
		A.DATE_LOST,
		A.DATE_UPLOAD,
		A.HOLD,
		M.NICKNAME,
		A.PLACE,
		A.TITLE,
		A.CONTENTS,
		A.IMAGE,
		A.HITS
		FROM TB_ARTICLE A
		INNER JOIN TB_MEMBER M 
		ON M.SEQ=A.MEMBER_SEQ
	</select>
	<select id ="selectOne" parameterType="HashMap" resultType="com.project.TheLostItemFinder.lostItem.service.ArticleDTO">
		SELECT
		SEQ, 
		TYPE_ITEM,
		TYPE_ARTICLE,
		DATE_LOST,
		DATE_UPLOAD,
		HOLD,
		PLACE,
		TITLE,
		CONTENTS,
		IMAGE,
		HITS
		FROM TB_ARTICLE
		WHERE SEQ=#{seq}
	</select>
	
</mapper>
